---
title: ìŠ¬ë™ ë´‡ìœ¼ë¡œ Daily Report ìë™í™” ë§Œë“¤ê¸°
categories: [ëšë”±ëšë”±]
tags: [JIRA, SLACK]
---


### ë°°ê²½
ìš°ë¦¬ íšŒì‚¬ì—ì„œëŠ” ë§¤ì¼ ì—…ë¬´ ì‹œì‘ê³¼ ì¢…ë£Œ ì‹œì— ë°ì¼ë¦¬ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•œë‹¤.

ì—…ë¬´ ì‹œì‘

<aside>
ğŸ’¡ 0000.00.00 (ì›”) ê¸ˆì¼ ì—…ë¬´ ìˆ˜í–‰í•  ê³„íš [ê·¼ë¬´ì§€: xxxì˜¤í”¼ìŠ¤]

[ABC-1234] [BE] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± estimated 1h / left 1h

</aside>

ì—…ë¬´ ì¢…ë£Œ

<aside>
ğŸ’¡ 0000.00.00 (ì›”) ê¸ˆì¼ ì—…ë¬´ ìˆ˜í–‰í•œ ë‚´ìš© [ê·¼ë¬´ì§€: xxxì˜¤í”¼ìŠ¤]

[ABC-1234] [BE] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± estimated 1h / left 1h / progress 1h --> left 0h [done]

</aside>

ì´ë ‡ê²Œ ì‘ì„±í•˜ëŠ” ë°©ì‹ì´ë‹¤.

ê·¸ëŸ°ë° ì´ëŸ¬í•œ ë°ì¼ë¦¬ ë¦¬í¬íŠ¸ê°€ ì‘ì„±í•  ë•Œ íŒ€ì—ì„œ ë¶ˆí¸í•œ ì ì´ ë§ì•˜ë‹¤..

1. ë‚ ì§œ, ìš”ì¼, ì§€ë¼ ë„˜ë²„ ë“± ì˜¤íƒ€ê°€ ë§ì´ ë°œìƒ
    
    â†’ ì•„ë¬´ë˜ë„ ì‚¬ëŒì´ ì‘ì„±í•˜ë‹¤ ë³´ë‹ˆ ë§ì§€ ì•ŠëŠ” ë°ì¼ë¦¬ ë¦¬í¬íŠ¸ê°€ ì‘ì„±ë˜ëŠ” ê²½ìš°ê°€ ìˆì–´ì„œ ìˆ˜ì •í•œ ì ì´ ì¢…ì¢… ìˆì—ˆë‹¤.
    
2. ë°ì¼ë¦¬ ë¦¬í¬íŠ¸ ì‘ì„± ìì²´ë¥¼ ìŠì–´ë²„ë¦¬ëŠ” ê²½ìš°ê°€ ìˆìŒ
    
    â†’ ì•„ì¹¨ì— ì¶œê·¼í•˜ìë§ˆì ì´ìŠˆê°€ ìƒê²¨ì„œ íšŒì˜ë¥¼ í•˜ê±°ë‚˜ ì½”ë“œ ì‘ì„±ì„ í•  ë•Œ ë°ì¼ë¦¬ ë¦¬í¬íŠ¸ë¥¼ ê¹Œë¨¹ëŠ” ê²½ìš°ê°€ íŒ€ì—ì„œ ìƒê²¼ë‹¤.
    
3. ì§€ë¼ì— ìˆëŠ” ì •ë³´ì¸ë° êµ³ì´..?
    
    â†’ ë°ì¼ë¦¬ ë¦¬í¬íŠ¸ëŠ” ì§€ë¼ì— ìˆëŠ” ë‚´ìš©ì„ ê±°ì˜ ë˜‘ê°™ì´ ìˆ˜ê¸°ë¡œ ì˜®ê¸°ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ì„±í•œë‹¤. ê·¸ë˜ì„œ ì§€ë¼ì— ë˜‘ê°™ì€ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë° êµ³ì´ ìŠ¬ë™ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ì‘ì„±í•´ì•¼ í•˜ëŠ”ê°€? ë¼ëŠ” ì˜ë¬¸ì´ ë“¤ì—ˆë‹¤.
    

ì´ëŸ¬í•œ ë¬¸ì œì ë“¤ì´ ìˆì–´ì„œ â€˜ê·¸ë˜ ê·¸ëƒ¥ ë‚´ê°€ í•˜ë‚˜ ë§Œë“¤ì! ê·¸ë˜ë„ ê°œë°œìì¸ë° ì´ ì •ë„ëŠ” ìë™í™”í•˜ì!!!â€™ í•˜ê³  ì‚½ì§ˆì„ ì‹œì‘í–ˆë‹¤.

### êµ¬í˜„

ë¨¼ì € êµ¬í˜„ íë¦„ì€ ì´ë ‡ê²Œ ì¡ì•˜ë‹¤.

1. Jira APIì—ì„œ ì›í•˜ëŠ” ì´ìŠˆ ì •ë³´ ë¶ˆëŸ¬ì˜´
    1. ë°ì¼ë¦¬ ë¦¬í¬íŠ¸ì— [ì§„í–‰ ì¤‘]ì¸ ì´ìŠˆì™€ ì˜¤ëŠ˜ ì™„ë£Œí•œ [ì™„ë£Œë¨]ì˜ ì´ìŠˆì˜ ì •ë³´ê°€ í•„ìš”í•¨
2. ë¶ˆëŸ¬ì˜¨ ì´ìŠˆë¥¼ SpringBootì—ì„œ ê°€ê³µ
    1. íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°ì¼ë¦¬ ë¦¬í¬íŠ¸ ì–‘ì‹ì´ ìˆì—ˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ì–‘ì‹ìœ¼ë¡œ ì¶œë ¥í•´ì•¼ í–ˆë‹¤.
    2. ì´ìŠˆì˜ ì¶”ì • ì‹œê°„, ì†Œìš” ì‹œê°„ ë“±ì€ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì§€ë§Œ ì§„í–‰í•œ ì‹œê°„ì€ ê³„ì‚°ì„ í•´ì•¼ í–ˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ë¡œì§ë„ ì¶”ê°€í–ˆë‹¤.
3. ì›” ~ ê¸ˆ ì˜¤ì „ 09ì‹œ, ì˜¤í›„ 06ì‹œì— @Schedulerë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì„œë“œ ì‹¤í–‰
4. ë©”ì„œë“œ ë¦¬í„´ ê°’ì„ ì»¤ìŠ¤í…€ ìŠ¬ë™ ë´‡ì„ ì´ìš©í•˜ì—¬ ì±„íŒ…ë°©ì— ì „ì†¡

1) ë¨¼ì € í”„ë¡œì íŠ¸ ìƒì„±ì„ í•œë‹¤.

- build.gradle

```groovy
plugins {
	id 'java'
	id 'org.springframework.boot' version '3.2.3'
	id 'io.spring.dependency-management' version '1.1.4'
}

group = 'com.chaorda'
version = '0.0.1-SNAPSHOT'

java {
	sourceCompatibility = '17'
}

configurations {
	compileOnly {
		extendsFrom annotationProcessor
	}
}

repositories {
	mavenCentral()
}

dependencies {
	implementation("com.slack.api:bolt:1.18.0")
	implementation("com.slack.api:bolt-servlet:1.18.0")
	implementation("com.slack.api:bolt-jetty:1.18.0")
	implementation 'org.springframework.boot:spring-boot-starter-web'
	implementation 'org.springframework.boot:spring-boot-starter-webflux'
	compileOnly 'org.projectlombok:lombok'
	annotationProcessor 'org.projectlombok:lombok'
	testImplementation 'org.springframework.boot:spring-boot-starter-test'
	testImplementation 'io.projectreactor:reactor-test'
}

tasks.named('test') {
	useJUnitPlatform()
}
```

2) ì§€ë¼ì—ì„œ ì´ìŠˆ ì •ë³´ë¥¼ ë°›ì•„ì˜¤ì!

- ì§€ë¼ ì´ìŠˆ ì •ë³´ë¥¼ ë‹´ì„ IssueDtoë¥¼ ìƒì„±í•˜ê³  WebClientë¡œ ë°›ì•„ì˜¨ë‹¤.
- ì—¬ê¸°ì„œ jqlì€ Â JiraÂ Query Languageì´ë‹¤.  Jira Issue ë¥¼ ê²€ìƒ‰í•˜ê¸° ìœ„í•œ êµ¬ì¡°ì ì¸ ì–¸ì–´ë‹¤.
- ì—…ë¬´ ì‹œì‘, ì—…ë¬´ ì¢…ë£Œ ì‹œì—” ë‹¤ë¥¸ jqlì´ ë“¤ì–´ê°€ì•¼ í•˜ê¸° ë•Œë¬¸ì— jqlì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì¤€ë‹¤.
- ë˜í•œ webclientì˜ ê¸°ë³¸ ì„¸íŒ…ìœ¼ë¡œëŠ” ì‚¬ì´ì¦ˆê°€ ë„˜ì¹˜ê¸° ë•Œë¬¸ì— ì„¤ì •ë„ ë°”ê¿”ì¤€ë‹¤.

```java
private IssueDto jiraWebClient(String jql) throws JsonProcessingException {
    ExchangeStrategies exchangeStrategies = ExchangeStrategies.builder()
            .codecs(configurer -> configurer.defaultCodecs().maxInMemorySize(-1)) // to unlimited memory size
            .build();
    WebClient client = WebClient.builder()
            .baseUrl(JIRA_URL)
            .exchangeStrategies(exchangeStrategies)
            .defaultHeader(AUTHORIZATION, "Basic " + java.util.Base64.getEncoder().encodeToString((JIRA_USERNAME + ":" + JIRA_TOKEN).getBytes()))
            .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)
            .build();
    String result = client.get()
            .uri("/rest/api/2/search?jql={jql}", jql)
            .retrieve()
            .bodyToFlux(String.class).blockFirst();
    ObjectMapper mapper = new ObjectMapper();
    return mapper.readValue(result, IssueDto.class);

}
```

3) ë°›ì•„ì˜¨ ì´ìŠˆ ì •ë³´ë¥¼ ê°€ê³µí•˜ì

ì—¬ê¸°ì„œ ì°¸ ë§ì´ ì‚½ì§ˆì„ í–ˆëŠ”ë° ë°©ë²• ì„¸ ê°€ì§€ë¥¼ ì•Œì•„ë³´ì

- String ê°’ìœ¼ë¡œ ë„£ê¸°
    - ë‹¨ìˆœí•˜ê²Œ ìŠ¤íŠ¸ë§ ê°’ì„ ì…ë ¥í•´ì„œ ë¦¬í„´í•˜ëŠ” ë°©ì‹ì´ë‹¤.
    - sb.append().apeend() â€¦.
    - ì¼ì¼ì´ íƒ€ì´í•‘ í•´ì•¼ í•˜ê³  ì–´ë µê³  ì§€ì› ì•ˆë˜ê³  ë“±ë“± í•˜ì§€ ë§ì.
- Block template ì´ìš©í•˜ê¸°
    - ìŠ¬ë™ì—ì„œëŠ” ë©”ì‹œì§€ë¥¼ **Block template ë¥¼ ì´ìš©í•˜ì—¬ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.**
    - ì•„ë˜ ë§í¬ë¥¼ í´ë¦­í•˜ë©´ í…œí”Œë¦¿ì„ ë§Œë“¤ì–´ë³´ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
        
        [](https://app.slack.com/block-kit-builder)
        
    - í•˜ì§€ë§Œ ê²°êµ­ Json í˜•íƒœë¥¼ ìŠ¤íŠ¸ë§ìœ¼ë¡œ ë¦¬í„´ í•´ì•¼ í•¨ìœ¼ë¡œ ì¼ì¼ì´ ì‘ì„±í•´ì•¼ í•œë‹¤ëŠ” ì ì€ ë³€í•¨ì´ ì—†ë‹¤.
- ìŠ¬ë™ apië¥¼ ì´ìš©í•˜ì—¬ blocks ì´ìš©í•˜ê¸°
    - ìŠ¬ë™ API ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì£¼ë©´ blocksë¥¼ í¸í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.
    
    ```java
    public void sendBlocks() throws IOException, SlackApiException {
            List<LayoutBlock> blocks = new ArrayList<>();
            IssueDto issueDto = jiraWebClient(END_JQL);
            blocks.add(section(section -> section.text(markdownText(helloChat()))));
            blocks.add(divider());
            blocks.add(section(section -> section.text(markdownText(title()))));
            blocks.add(section(section -> section.text(markdownText(makeEndMessage(issueDto)))));
            blocks.add(divider());
            blocks.add(section(section -> section.text(markdownText(endChat()))));
            MethodsClient methods = Slack.getInstance().methods(SLACK_TOKEN);
            ChatPostMessageRequest request = ChatPostMessageRequest.builder()
                    .channel(SLACK_CHANNEL)
                    .blocks(blocks)
                    .build();
            methods.chatPostMessage(request);
        }
    
    ```
    

4) ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¼ì •í•œ ì‹œê°„ì— ì „ì†¡í•˜ì.

- ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì¶”ê°€í•´ì£¼ì

```java
@SpringBootApplication
@EnableScheduling
public class DailyreportApplication {
	public static void main(String[] args) {
		SpringApplication.run(DailyreportApplication.class, args);
	}
}
```

- @Schedule ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•œë‹¤.

```java
 @Scheduled(cron = "0 0 9 * * 1-5", zone = "Asia/Seoul") // ë§¤ì¼ ì˜¤ì „ 9ì‹œ ì‹¤í–‰
    public void sendBlocks() throws IOException, SlackApiException {
        List<LayoutBlock> blocks = new ArrayList<>();
        IssueDto issueDto = jiraWebClient(START_JQL);
        blocks.add(section(section -> section.text(markdownText(helloChat()))));
        blocks.add(divider());
        blocks.add(section(section -> section.text(markdownText(title()))));
        blocks.add(section(section -> section.text(markdownText(makeStartMessage(issueDto)))));
        blocks.add(divider());
        blocks.add(section(section -> section.text(markdownText(endChat()))));
        MethodsClient methods = Slack.getInstance().methods(SLACK_TOKEN);
        ChatPostMessageRequest request = ChatPostMessageRequest.builder()
                .channel(SLACK_CHANNEL)
                .blocks(blocks)
                .build();
        methods.chatPostMessage(request);
    }
```

5) ì‘ì„±í•œ ë©”ì‹œì§€ë¥¼ ìŠ¬ë™ ë´‡ì„ ìƒì„±í•˜ì—¬ ì±„ë„ì— ì „ì†¡í•˜ì

### ê²°ê³¼

ì„±ê³µì ìœ¼ë¡œ ë©”ì‹œì§€ê°€ ë‚˜ì˜¤ëŠ” ëª¨ìŠµì„ ë³´ì¸ë‹¤.

![ì œëª© ì—†ìŒ.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/f3f46391-2d7d-4cbc-9fe4-d9363de7a908/b341d5de-e44c-4a2b-a564-6f29991fe542/%EC%A0%9C%EB%AA%A9_%EC%97%86%EC%9D%8C.png)

ì—¬ë‹´)

ë°ì¼ë¦¬ë¦¬í¬íŠ¸ ë´‡ì„ ì§‘ì—ì„œ ë§Œë“¤ê³  ì¶œê·¼í•´ì„œ â€œì§œì”! ì—¬ëŸ¬ë¶„ ~ ì´ì œ í¸í•˜ê²Œ ì‚¬ìš©í•˜ì„¸ìš”~â€ ë¼ê³  í•˜ë ¤ê³  í–ˆì§€ë§Œ.. CTOë‹˜ì´ Daily ReportëŠ” ì—…ë¬´ ë‚´ìš©ì„ ìŠ¬ë™ì— ê³µìœ í•˜ê³  ì—°êµ¬ë…¸íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ë“± ë¬¸ì„œí™”ì˜ ëª©ì ë„ ìˆì§€ë§Œ ë³¸ì¸ì´ ìŠ¤ìŠ¤ë¡œ ì—…ë¬´ë¥¼ ì‹œì‘, ì¢…ë£Œí•  ë•Œ í•´ë‹¹ ì—…ë¬´ë¥¼ íŒŒì•…í•˜ëŠ” ëª©ì ë„ ìˆë‹¤ê³  í•˜ì…”ì„œ ê²°êµ­ íŒŒê¸°í–ˆë‹¤ëŠ” ìŠ¬í”ˆì´ì•¼ê¸°..

ê·¸ë˜ë„ API ì—°ë™ì„ í•´ë³´ê³  ìŠ¬ë™ë´‡ì„ ì»¤ìŠ¤í…€ í•˜ëŠ” ê²½í—˜ë„ í–ˆìœ¼ë‹ˆ ë§Œì¡±! ğŸ˜€
